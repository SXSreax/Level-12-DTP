{% extends "components/base.html" %} {% block title %}User Page{% endblock %} {%
block head %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/pages/user.css') }}"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>
{% endblock %} {% block content %} {% with messages =
get_flashed_messages(with_categories=true) %} {% if messages %}
<div class="flash-messages">
  {% for category, message in messages %}
  <div class="flash-message {{ category }}">{{ message }}</div>
  {% endfor %}
</div>
{% endif %} {% endwith %}

<div class="user-container">
  <div class="user-details">
    <h1>User Profile</h1>
    <form
      method="POST"
      enctype="multipart/form-data"
      id="user-form"
      class="user-form"
    >
      <div class="profile-pic-center">
        <label for="profile_pic" class="profile-pic-label">
          <img
            src="{{ url_for('static', filename=profile_image_url) }}"
            class="user-profile-pic"
            alt="Profile Picture"
          />
          <span class="profile-pic-overlay">
            <img
              src="{{ url_for('static', filename='images/pencil.png') }}"
              class="pencil-icon"
              alt="Edit"
            />
          </span>
        </label>
        <input
          type="file"
          id="profile_pic"
          name="profile_pic"
          accept="image/png, image/jpeg, image/jpg, image/gif"
          style="display: none"
          onchange="document.getElementById('user-form').submit();"
        />
      </div>

      <div class="form-group user-input-wrapper">
        <label for="username">Username:</label>
        <input
          type="text"
          id="username"
          name="username"
          value="{{ username }}"
          required
          maxlength="50"
          oninput="document.getElementById('username-char-count').textContent = this.value.length + '/50';"
        />
        <span
          id="username-char-count"
          class="char-count user-char-count"
          style="right: 10px"
          >{{ username|length if username else 0 }}/50</span
        >
      </div>
      <div class="form-group user-input-wrapper">
        <label for="email">Email:</label>
        <input
          type="email"
          id="email"
          name="email"
          value="{{ email }}"
          required
          maxlength="50"
          oninput="document.getElementById('email-char-count').textContent = this.value.length + '/50';"
        />
        <span
          id="email-char-count"
          class="char-count user-char-count"
          style="right: 10px"
          >{{ email|length if email else 0 }}/50</span
        >
      </div>
      <div class="form-group user-input-wrapper">
        <label for="old_password">Current Password:</label>
        <input
          type="password"
          id="old_password"
          name="old_password"
          placeholder="Enter current password"
          maxlength="50"
          oninput="document.getElementById('oldpw-char-count').textContent = this.value.length + '/50';"
        />
        <span
          id="oldpw-char-count"
          class="char-count user-char-count"
          style="right: 10px"
          >0/50</span
        >
      </div>
      <div class="form-group user-input-wrapper">
        <label for="new_password">New Password:</label>
        <input
          type="password"
          id="new_password"
          name="new_password"
          placeholder="Enter new password"
          maxlength="50"
          oninput="document.getElementById('newpw-char-count').textContent = this.value.length + '/50';"
        />
        <span
          id="newpw-char-count"
          class="char-count user-char-count"
          style="right: 10px"
          >0/50</span
        >
      </div>
      <button type="submit" class="user-save-btn">Save Changes</button>
    </form>
  </div>
</div>
{% endblock %}
